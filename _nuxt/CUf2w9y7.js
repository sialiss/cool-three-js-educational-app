import{f as _,D as w,E as k,F as x,r as t,c as l,o as a,a as s,G as M,H as c,I as v,J as f,d as V,_ as h}from"./BQXDO-Iu.js";const B={class:"login-page"},C={class:"login-card"},q={class:"input-group"},N={class:"input-group"},A=["disabled"],D={key:0},E={key:1,class:"loading"},I=_({__name:"login",setup(R){const m=w(),g=k(),{login:y}=x(),n=t(""),r=t(""),o=t(!1),i=t(!1),b=async()=>{o.value=!0;try{await y(n.value,r.value),g.push("/dashboard")}catch(p){console.error("Ошибка входа: ",p)}finally{o.value=!1}};m.query.loggedOut==="true"&&(i.value=!0);const u=()=>{i.value=!1};return(p,e)=>(a(),l("div",B,[s("div",C,[e[6]||(e[6]=s("h2",{class:"title"},"Вход в аккаунт",-1)),s("form",{onSubmit:c(b,["prevent"]),class:"form"},[s("div",q,[e[2]||(e[2]=s("label",{for:"login"},"Логин",-1)),v(s("input",{id:"login","onUpdate:modelValue":e[0]||(e[0]=d=>n.value=d),type:"text",required:"",autocomplete:"username"},null,512),[[f,n.value]])]),s("div",N,[e[3]||(e[3]=s("label",{for:"password"},"Пароль",-1)),v(s("input",{id:"password","onUpdate:modelValue":e[1]||(e[1]=d=>r.value=d),type:"password",required:""},null,512),[[f,r.value]])]),s("button",{type:"submit",disabled:o.value,class:"primary-btn"},[o.value?(a(),l("span",E,e[4]||(e[4]=[s("svg",{class:"spinner",viewBox:"0 0 24 24"},[s("circle",{class:"circle",cx:"12",cy:"12",r:"10"}),s("path",{class:"path",d:"M4 12a8 8 0 018-8v4l4-4-4-4v4A8 8 0 004 12z"})],-1),V(" Вход... ")]))):(a(),l("span",D,"Войти"))],8,A),e[5]||(e[5]=s("div",{class:"links"},[s("a",{href:"/forgot-password"},"Забыли пароль?")],-1))],32)]),i.value?(a(),l("div",{key:0,class:"modal-overlay",onClick:c(u,["self"])},[s("div",{class:"modal-content"},[e[7]||(e[7]=s("p",null,"Вы вышли из аккаунта",-1)),s("button",{class:"close-btn",onClick:u},"Закрыть")])])):M("",!0)]))}}),U=h(I,[["__scopeId","data-v-e3553bc3"]]);export{U as default};
